fontscale = 1.30


$grey = 0x505861
$green = 0x00d15f

$shift = 0.70
$col = $shift*1.5
$rad = $shift/3
$m = 3.5
$ra = 0.1


$offset = 0.15


SM:  box width $col rad $rad fill $green color white "M365" "Data" 
SE:  box same as SM "Exchange" "On Premises"  at $shift south of SM
SS:  box same as SM "Sharepoint" "On Premises" at $shift south of SE

P:   box rad $rad width $col*1.2 height $shift*3  at $shift*$m right of SE fill $grey color 0xffffff 
     text at $shift*1.3 north of P  "Proxy" big color white

SMP: text "443" small bold color $grey with .w at  SM.e +($offset,0)
SEP: text "443" small bold same as SMP with .w at  SE.e +($offset,0)
SSP: text "5985" small bold same as SMP with .w at SS.e +($offset,0)


     arrow <- from SM.e to SMP.w color $grey rad $ra
     line from SMP.e right $offset*$m \
        then to P.w - (-$offset,-$offset) then right $ra color $grey rad $ra
    
     arrow <- from SE.e to SEP.w color $grey rad $ra
     line from SEP.e right $offset*$m \
        then to P.w - (-$offset,0) then right $offset color $grey rad $ra

     arrow <- from SS.e to SSP.w color $grey rad $ra
     line from SSP.e  right $offset*$m \
        then to P.w - (-$offset,$offset) color $grey rad $ra

OSL: line from P.e - ($offset,0) color $grey width $shift


PS:  box same as SM "Service" at 0 right of P
PC:  box same as SM "Local" "Cache" at $shift south of PS
     arrow <-> from PS.s to PC.n color white


right

     
OSP: text "443" small bold same as SMP with .w at OSL.e 
     line width $shift/3 invisible 
OS:  box same as SM "Object Storage"

     arrow -> from OSP.e to OS.w color $grey


